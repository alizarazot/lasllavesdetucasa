<div class="min-h-screen flex flex-col bg-green-white overflow-x-hidden">

  <!-- Fixed Header (Appears on scroll) -->
  <header
    class="fixed top-0 left-0 right-0 h-16 bg-dark-grey-blue text-white flex items-center justify-between px-6 z-40 transition-transform duration-300 transform"
    [class.-translate-y-full]="!showFixedHeader" [class.translate-y-0]="showFixedHeader">

    <!-- Filter Panel (Left) -->
    <div class="absolute left-6">
      <app-filter-panel (filtersChanged)="onFiltersChanged($event)"></app-filter-panel>
    </div>

    <h1 class="text-xl font-serif mx-auto">Inmobiliaria Las llaves de tu casa</h1>

    <div class="absolute right-6">
      <a routerLink="/login">
        <img src="/assets/log-in-sharp.svg" class="w-6 h-6 text-white invert" alt="Login" />
      </a>
    </div>
  </header>

  <!-- Top Right User Icon (Hero only) -->
  <div class="absolute top-0 right-0 p-6 z-10">
    <a routerLink="/login">
      <img src="/assets/person-sharp.svg" class="w-10 h-10 text-aubergine" alt="User" />
    </a>
  </div>

  <!-- Hero Section -->
  <section class="flex flex-col items-center justify-center min-h-dvh gap-8 px-4">
    <img src="/full-logo.jpeg" alt="Las llaves de tu casa" class="w-full max-w-md mix-blend-multiply" />
  </section>

  <!-- Catalog Section -->
  <main class="flex flex-col px-10 pb-40 gap-10">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto w-full">
      @for (property of filteredProperties; track property.address) {
      <app-card-real-state [property]="property" />
      }
    </div>
  </main>

  <!-- Floating Search Bar with Filter Badges -->
  <div class="fixed bottom-8 left-0 right-0 z-50 px-4 flex justify-center items-center gap-3 pointer-events-none">
    <!-- Active Filter Badges (Left side) -->
    <div *ngIf="hasActiveFilters" class="flex gap-2 pointer-events-auto">
      <!-- Price Filter Badge -->
      <div *ngIf="activeFilters.minPrice || activeFilters.maxPrice"
        class="flex items-center gap-2 bg-sandy-brown text-black py-3 px-4 rounded-2xl font-serif text-2xl">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-8 h-8">
          <path d="M12 5v14M5 12l7-7 7 7" />
        </svg>
        <span>
          @if (activeFilters.minPrice && activeFilters.maxPrice) {
          ${{ activeFilters.minPrice / 1000000 }}M - ${{ activeFilters.maxPrice / 1000000 }}M
          } @else if (activeFilters.minPrice) {
         ${{ activeFilters.minPrice}}
          } @else {
         ${{ activeFilters.maxPrice! }}
          }
        </span>
      </div>

      <!-- Bedrooms Filter Badge -->
      <div *ngIf="activeFilters.bedrooms !== undefined"
        class="flex items-center gap-2 bg-sandy-brown text-black py-3 px-4 rounded-2xl font-serif text-2xl">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="w-8 h-8">
          <path 
            d="M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3zm12-6h-8v7H3V7H1v10h22v-6c0-2.21-1.79-4-4-4z" />
        </svg>
        <span>{{ activeFilters.bedrooms }}</span>
      </div>

      <!-- Parking Filter Badge -->
      <div *ngIf="activeFilters.parking !== undefined"
        class="flex items-center gap-2 bg-sandy-brown text-black py-3 px-4 rounded-2xl font-serif text-2xl">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="w-8 h-8">
          <path
            d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z" />
        </svg>
        <span>Yes</span>
      </div>
    </div>

    <!-- Search Bar (Center) -->
    <div class="w-full max-w-2xl pointer-events-auto">
      <app-search-bar />
    </div>
  </div>
</div>